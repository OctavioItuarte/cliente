<div class="m-5 min-vh-100">
    <h2 class="mb-4">Mis Productos</h2>
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>
                    Nombre
                </th>
                <th>
                    Descripcion
                </th>
                <th>
                    Precio unitario
                </th>
                <th>
                    Cantidad disponible
                </th>
                <th>
                    Imagen
                </th>
                <th>
                    Ultima modificacion
                </th>
                <th>
                    <button class="btn btn-success btn-sm me-2" (click)="addProduct()">Agregar producto</button>
                </th>
                <th>
                    <button class="btn btn-warning" (click)="updateProduct()">Modificar</button>
                </th>
                <th>
                    <button class="btn btn-danger" (click)="deleteSelected()"><i class="bi bi-trash"></i>Limpiar</button>
                </th>
            </tr>
        </thead>
        <tbody>
            
            <tr>
                <td>
                    <div class="mb-3">
                        <input type="text" class="form-control" id="nombre" value="Ingrese el nombre"
                        [(ngModel)]="new_product.name">
                    </div>
                </td>
                <td>
                    <div class="mb-3">
                        <input type="text" class="form-control" id="nombre" value="Ingrese el nombre"
                        [(ngModel)]="new_product.description">
                    </div>
                </td>
                <td>
                    <div class="mb-3">
                        <input type="number" class="form-control" id="precio"
                        [(ngModel)]="new_product.price">
                    </div>
                </td>
                <td>
                    <div class="mb-3">
                        <input type="number" class="form-control" id="stock"
                        [(ngModel)]="new_product.stock">
                    </div>
                </td>
                <td>
                    <div class="mb-3">
                      <input
                        type="file"
                        class="form-control visually-hidden"
                        id="imagen"
                        accept="image/*"
                        (change)="onFileSelected($event)"
                      >
                      <label for="imagen" class="btn btn-light">
                        <i class="bi bi-archive"></i> 
                      </label>
                    </div>
                  </td>
                <td>
                </td>
                <td></td>
                <td></td>
                <td class="text-center">
                    <input type="checkbox" id="selectAll" (change)="toggleSelectAll($event)" class="form-check-input">
                    <span class="ms-2">Seleccionar todo</span>
                </td>
            </tr>
            
            <tr *ngFor="let product of products_list; let i = index">
                <td>
                    {{product.name}}
                </td>
                <td>
                    {{product.description}} 
                </td>
                <td>
                    {{product.price | currency}}
                </td>
                <td>
                    {{product.stock}} 
                </td>
                <td>
                    <img [src]="product.image" [alt]="product.name" class="img-thumbnail" width="100" height="100">
                </td>
                <td>
                    {{product.last_change | date:'dd/MM/yyyy HH:mm'}}
                </td>
                <td>
                    <div>
                        <button class="btn btn-warning" (click)="activateEdit(product)">Editar</button>
                        @if (updatingProduct == product._id){
                            <i class="bi bi-pencil m-2"></i>
                        }
                    </div>
                </td>
                <td>

                </td>
                <td>
                    <input type="checkbox" [id]="'checkbox' + i" (change)="onSelectRow($event, i)" class="form-check-input"> <!-- Casilla por fila -->
                </td>
            </tr>
            
        </tbody>
    </table>
</div>
